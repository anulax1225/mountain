<template>
    <button class="border p-2 m-2" @click="showPage()" x-text="show">show</button>
    <div x-ref="routerView">

    </div>

</template>

<script setup>
    return {
        show: false,
        init() {
            console.log("init router view")
            effect(() => {
                let page = this.$store.router.currentPage;
                if (this.show.value && !Alpine.compositor.hasComponent(page)) {
                    console.log("[Alpine router] Dynamic page load of " + page)
                    !Alpine.compositor.loadComponent(page);
                }
                console.log($refs, page)
                if($refs.routerView) $refs.routerView.innerHTML = `<${page}></${page}>`;
            });
        },
        showPage() {
            console.log("show")
            this.show = !this.show;
        }
    }
</script>